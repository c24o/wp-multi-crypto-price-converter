{"version":3,"file":"blocks/converter/view.js","mappings":"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","sources":["webpack://multi-crypto-convert-wp-plugin/./src/blocks/converter/view.js"],"sourcesContent":["/**\n * Frontend script for the Multi-Crypto Converter block.\n *\n * Handles:\n * - Fetching cryptocurrency prices from REST API every minute\n * - Updating the table with current prices\n * - Real-time conversion calculations based on USD input\n */\n\n/**\n * State management for the converter block\n */\nconst converterState = {\n\tprices: {},\n\tupdateInterval: null,\n\tisLoading: false,\n\terror: null,\n};\n\n/**\n * Fetch prices from the REST API endpoint\n *\n * @param {string} coinsParam - Comma-separated coin symbols (e.g., \"BTC,ETH\")\n * @return {Promise<Object>} Prices object keyed by coin symbol\n */\nasync function fetchPrices( coinsParam ) {\n\ttry {\n\t\tconst response = await fetch( `/wp-json/mcc/v1/prices?coins=${ coinsParam }`, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t} );\n\n\t\tif ( !response.ok ) {\n\t\t\tthrow new Error( `HTTP error! status: ${ response.status }` );\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif ( data.success && data.data ) {\n\t\t\tconst pricesMap = {};\n\t\t\tdata.data.forEach( ( item ) => {\n\t\t\t\tpricesMap[ item.symbol ] = parseFloat( item.price_usd );\n\t\t\t} );\n\t\t\treturn pricesMap;\n\t\t}\n\n\t\tthrow new Error( data.message || 'Invalid API response' );\n\t} catch ( error ) {\n\t\tconsole.error( 'Failed to fetch prices:', error );\n\t\treturn {};\n\t}\n}\n\n/**\n * Calculate conversion amount\n *\n * @param {number} usdAmount - The USD amount to convert\n * @param {number} price - The price of the cryptocurrency in USD\n * @return {string} The converted amount formatted to 8 decimal places\n */\nfunction calculateConversion( usdAmount, price ) {\n\tif ( !usdAmount || !price || price === 0 ) {\n\t\treturn '0.00000000';\n\t}\n\n\tconst amount = parseFloat( usdAmount );\n\tif ( isNaN( amount ) ) {\n\t\treturn '0.00000000';\n\t}\n\n\tconst converted = amount / price;\n\treturn converted.toFixed( 8 );\n}\n\n/**\n * Format price for display\n *\n * @param {number} price - The price in USD\n * @return {string} Formatted price string\n */\nfunction formatPrice( price ) {\n\tif ( !price || price === 0 ) {\n\t\treturn '—';\n\t}\n\n\treturn new Intl.NumberFormat( 'en-US', {\n\t\tstyle: 'currency',\n\t\tcurrency: 'USD',\n\t\tminimumFractionDigits: 2,\n\t\tmaximumFractionDigits: 2,\n\t} ).format( price );\n}\n\n/**\n * Create the HTML table with converter rows\n *\n * @param {string[]} coins - Array of coin symbols\n * @return {HTMLElement} The table wrapper element\n */\nfunction createConverterTable( coins ) {\n\tconst tableWrapper = document.createElement( 'div' );\n\ttableWrapper.className = 'mcc-converter-table-wrapper';\n\n\tconst table = document.createElement( 'table' );\n\ttable.className = 'mcc-converter-table';\n\n\t// Create table header\n\tconst thead = document.createElement( 'thead' );\n\tconst headerRow = document.createElement( 'tr' );\n\n\tconst thCoin = document.createElement( 'th' );\n\tthCoin.className = 'mcc-converter-th-coin';\n\tthCoin.textContent = 'Cryptocurrency';\n\n\tconst thPrice = document.createElement( 'th' );\n\tthPrice.className = 'mcc-converter-th-price';\n\tthPrice.textContent = 'Price (USD)';\n\n\tconst thAmount = document.createElement( 'th' );\n\tthAmount.className = 'mcc-converter-th-amount';\n\tthAmount.textContent = 'Converted Amount';\n\n\theaderRow.appendChild( thCoin );\n\theaderRow.appendChild( thPrice );\n\theaderRow.appendChild( thAmount );\n\tthead.appendChild( headerRow );\n\ttable.appendChild( thead );\n\n\t// Create table body with rows for each coin\n\tconst tbody = document.createElement( 'tbody' );\n\tcoins.forEach( ( coin ) => {\n\t\tconst row = document.createElement( 'tr' );\n\t\trow.className = 'mcc-converter-row';\n\t\trow.setAttribute( 'data-coin', coin );\n\n\t\tconst tdCoin = document.createElement( 'td' );\n\t\ttdCoin.className = 'mcc-converter-td-coin';\n\t\tconst coinSymbol = document.createElement( 'span' );\n\t\tcoinSymbol.className = 'mcc-coin-symbol';\n\t\tcoinSymbol.textContent = coin;\n\t\ttdCoin.appendChild( coinSymbol );\n\n\t\tconst tdPrice = document.createElement( 'td' );\n\t\ttdPrice.className = 'mcc-converter-td-price';\n\t\tconst priceSpan = document.createElement( 'span' );\n\t\tpriceSpan.className = 'mcc-coin-price';\n\t\tpriceSpan.setAttribute( 'data-price', '' );\n\t\tpriceSpan.textContent = '—';\n\t\ttdPrice.appendChild( priceSpan );\n\n\t\tconst tdAmount = document.createElement( 'td' );\n\t\ttdAmount.className = 'mcc-converter-td-amount';\n\t\tconst amountSpan = document.createElement( 'span' );\n\t\tamountSpan.className = 'mcc-converted-amount';\n\t\tamountSpan.setAttribute( 'data-amount', '' );\n\t\tamountSpan.textContent = '—';\n\t\ttdAmount.appendChild( amountSpan );\n\n\t\trow.appendChild( tdCoin );\n\t\trow.appendChild( tdPrice );\n\t\trow.appendChild( tdAmount );\n\t\ttbody.appendChild( row );\n\t} );\n\n\ttable.appendChild( tbody );\n\ttableWrapper.appendChild( table );\n\n\treturn tableWrapper;\n}\n\n/**\n * Create and insert the USD input field at the top of the converter block\n *\n * @param {HTMLElement} block - The converter block element\n * @return {HTMLElement} The input element\n */\nfunction createAndInsertInputField( block ) {\n\tconst inputGroup = document.createElement( 'div' );\n\tinputGroup.className = 'mcc-converter-input-group';\n\n\tconst label = document.createElement( 'label' );\n\tlabel.className = 'mcc-converter-label';\n\tlabel.setAttribute( 'for', 'mcc-usd-amount' );\n\tlabel.textContent = 'Amount (USD)';\n\n\tconst input = document.createElement( 'input' );\n\tinput.id = 'mcc-usd-amount';\n\tinput.type = 'number';\n\tinput.className = 'mcc-converter-input';\n\tinput.placeholder = '0.00';\n\tinput.step = '0.01';\n\tinput.min = '0';\n\tinput.value = '1';\n\tinput.setAttribute( 'data-type', 'currency-input' );\n\n\tinputGroup.appendChild( label );\n\tinputGroup.appendChild( input );\n\n\t// Insert input group before the table wrapper\n\tconst tableWrapper = block.querySelector( '.mcc-converter-table-wrapper' );\n\tif ( tableWrapper ) {\n\t\tblock.insertBefore( inputGroup, tableWrapper );\n\t}\n\n\treturn input;\n}\n\n/**\n * Update the converter table with current prices and conversions\n *\n * @param {HTMLElement} block - The converter block element\n * @param {Object} prices - Object with coin symbols as keys and prices as values\n */\nfunction updateConverterTable( block, prices ) {\n\tconst input = block.querySelector( '[data-type=\"currency-input\"]' );\n\tconst usdAmount = input ? input.value : '0';\n\n\t// Update each row with price and conversion\n\tblock.querySelectorAll( '.mcc-converter-row' ).forEach( ( row ) => {\n\t\tconst coin = row.getAttribute( 'data-coin' );\n\t\tconst price = prices[ coin ];\n\n\t\t// Update price cell\n\t\tconst priceSpan = row.querySelector( '[data-price]' );\n\t\tif ( priceSpan ) {\n\t\t\tpriceSpan.textContent = formatPrice( price );\n\t\t}\n\n\t\t// Update conversion cell\n\t\tconst amountSpan = row.querySelector( '[data-amount]' );\n\t\tif ( amountSpan && price ) {\n\t\t\tconst converted = calculateConversion( usdAmount, price );\n\t\t\tamountSpan.textContent = converted;\n\t\t}\n\t} );\n}\n\n/**\n * Initialize the converter block\n *\n * @param {HTMLElement} block - The converter block element\n */\nfunction initConverterBlock( block ) {\n\t// Get coins from data attribute\n\tconst coinsData = block.querySelector( '.mcc-converter-coins-data' );\n\tif ( !coinsData ) {\n\t\treturn;\n\t}\n\n\tconst coinsString = coinsData.getAttribute( 'data-coins' );\n\tif ( !coinsString ) {\n\t\treturn;\n\t}\n\n\t// Parse coins from comma-separated string\n\tconst coins = coinsString.split( ',' ).map( ( coin ) => coin.trim() ).filter( ( coin ) => coin.length > 0 );\n\n\tif ( coins.length === 0 ) {\n\t\treturn;\n\t}\n\n\t// Build and insert the converter table\n\tconst table = createConverterTable( coins );\n\tcoinsData.replaceWith( table );\n\n\t// Create and insert the USD input field\n\tconst input = createAndInsertInputField( block );\n\n\tconst coinsParam = coins.join( ',' );\n\n\t// Fetch prices immediately\n\tfetchPrices( coinsParam ).then( ( prices ) => {\n\t\tconverterState.prices = prices;\n\t\tupdateConverterTable( block, prices );\n\t} );\n\n\t// Set up periodic updates (every 60 seconds)\n\tif ( converterState.updateInterval ) {\n\t\tclearInterval( converterState.updateInterval );\n\t}\n\n\tconverterState.updateInterval = setInterval( () => {\n\t\tfetchPrices( coinsParam ).then( ( prices ) => {\n\t\t\tconverterState.prices = prices;\n\t\t\tupdateConverterTable( block, prices );\n\t\t} );\n\t}, 60000 ); // 60000ms = 1 minute\n\n\t// Handle USD input changes for real-time conversion\n\tif ( input ) {\n\t\tinput.addEventListener( 'input', ( e ) => {\n\t\t\tconst value = e.target.value;\n\n\t\t\t// Allow empty, 0, and positive numbers\n\t\t\tif ( value === '' || value === '0' || ( parseFloat( value ) > 0 && !isNaN( value ) ) ) {\n\t\t\t\tupdateConverterTable( block, converterState.prices );\n\t\t\t}\n\t\t} );\n\t}\n}\n\n/**\n * Initialize all converter blocks on the page\n */\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tconst blocks = document.querySelectorAll( '.mcc-converter-block' );\n\tblocks.forEach( ( block ) => {\n\t\tinitConverterBlock( block );\n\t} );\n} );\n"],"names":["converterState","prices","updateInterval","isLoading","error","fetchPrices","coinsParam","response","fetch","method","headers","ok","Error","status","data","json","success","pricesMap","forEach","item","symbol","parseFloat","price_usd","message","console","calculateConversion","usdAmount","price","amount","isNaN","converted","toFixed","formatPrice","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","createConverterTable","coins","tableWrapper","document","createElement","className","table","thead","headerRow","thCoin","textContent","thPrice","thAmount","appendChild","tbody","coin","row","setAttribute","tdCoin","coinSymbol","tdPrice","priceSpan","tdAmount","amountSpan","createAndInsertInputField","block","inputGroup","label","input","id","type","placeholder","step","min","value","querySelector","insertBefore","updateConverterTable","querySelectorAll","getAttribute","initConverterBlock","coinsData","coinsString","split","map","trim","filter","length","replaceWith","join","then","clearInterval","setInterval","addEventListener","e","target","blocks"],"ignoreList":[],"sourceRoot":""}