{"version":3,"file":"blocks/converter/view.js","mappings":"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","sources":["webpack://multi-crypto-convert-wp-plugin/./src/blocks/converter/FrontendConverter.tsx","webpack://multi-crypto-convert-wp-plugin/external window [\"wp\",\"element\"]","webpack://multi-crypto-convert-wp-plugin/external window [\"wp\",\"i18n\"]","webpack://multi-crypto-convert-wp-plugin/external window \"React\"","webpack://multi-crypto-convert-wp-plugin/external window \"ReactJSXRuntime\"","webpack://multi-crypto-convert-wp-plugin/webpack/bootstrap","webpack://multi-crypto-convert-wp-plugin/webpack/runtime/compat get default export","webpack://multi-crypto-convert-wp-plugin/webpack/runtime/define property getters","webpack://multi-crypto-convert-wp-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://multi-crypto-convert-wp-plugin/webpack/runtime/make namespace object","webpack://multi-crypto-convert-wp-plugin/./src/blocks/converter/view.tsx"],"sourcesContent":["/**\n * React component for the frontend view of the Multi-Crypto Converter block.\n */\nimport { ReactElement, useEffect, useState } from 'react';\nimport { __ } from '@wordpress/i18n';\n\ninterface PricesMap {\n\t[key: string]: number;\n}\n\ninterface FrontendConverterProps {\n\tcoins: string[];\n}\n\nconst UPDATE_INTERVAL_MS = 60000;\n\n/**\n * Fetch prices from the REST API endpoint.\n *\n * @param {string} coinsParam - Comma-separated coin symbols.\n * @return {Promise<PricesMap>} A map of coin symbols to their prices in USD.\n */\nasync function fetchPrices( coinsParam: string ): Promise<PricesMap> {\n\ttry {\n\t\tconst response = await fetch( `/wp-json/mcc/v1/prices?coins=${ coinsParam }` );\n\t\tif ( ! response.ok ) {\n\t\t\tthrow new Error( `HTTP error! status: ${ response.status }` );\n\t\t}\n\t\tconst data = await response.json();\n\t\tif ( data.success && data.data ) {\n\t\t\tconst pricesMap: PricesMap = {};\n\t\t\tdata.data.forEach( ( item: { symbol: string, price_usd: string } ) => {\n\t\t\t\tpricesMap[ item.symbol ] = parseFloat( item.price_usd );\n\t\t\t} );\n\t\t\treturn pricesMap;\n\t\t}\n\t\tthrow new Error( data.message || 'Invalid API response' );\n\t} catch ( error ) {\n\t\tconsole.error( 'Failed to fetch prices:', error );\n\t\treturn {};\n\t}\n}\n\n/**\n * Calculate the converted amount.\n *\n * @param {number} usdAmount - The amount in USD.\n * @param {number} price - The price of the cryptocurrency.\n * @return {number} The converted amount, formatted to 8 decimal places.\n */\nfunction calculateConversion( usdAmount: number, price: number ): number {\n\tif ( ! usdAmount || ! price || price === 0 ) {\n\t\treturn 0;\n\t}\n\treturn usdAmount / price;\n}\n\n/**\n * Format the converted amount to display it.\n *\n * @param {number} amount - The amount to format.\n * @return {string} The amount formatted to 8 decimal places.\n */\nfunction formatConvertedAmount( amount: number ): string {\n\treturn amount ? amount.toFixed( 8 ) : '';\n}\n\n/**\n * Format a number as a USD currency string.\n *\n * @param {number} price - The price to format.\n * @return {string} The formatted price string.\n */\nfunction formatPrice( price: number ): string {\n\tif ( ! price || price === 0 ) {\n\t\treturn 'â€”';\n\t}\n\treturn new Intl.NumberFormat( 'en-US', {\n\t\tstyle: 'currency',\n\t\tcurrency: 'USD',\n\t\tminimumFractionDigits: 2,\n\t\tmaximumFractionDigits: 2,\n\t} ).format( price );\n}\n\nexport default function FrontendConverter( { coins }: FrontendConverterProps ): ReactElement {\n\tconst [ prices, setPrices ] = useState<PricesMap>( {} );\n\tconst [ amounts, setAmounts ] = useState<PricesMap>( { 'usd': 1 } );\n\tconst [ lastBaseCoin, setLastBaseCoin ] = useState<string>( 'usd' );\n\tconst [ isLoading, setIsLoading ] = useState<boolean>( true );\n\n\tuseEffect( () => {\n\t\tconst coinsParam = coins.join( ',' );\n\n\t\tconst updatePrices = async () => {\n\t\t\tconst fetchedPrices = await fetchPrices( coinsParam );\n\t\t\tsetPrices( fetchedPrices );\n\t\t\tsetIsLoading( false );\n\t\t};\n\n\t\t// Fetch prices immediately and then set an interval.\n\t\tupdatePrices();\n\t\tconst intervalId = setInterval( updatePrices, UPDATE_INTERVAL_MS );\n\n\t\t// Cleanup interval on component unmount.\n\t\treturn () => clearInterval( intervalId );\n\t}, [ coins ] );\n\n\t// Recalculate conversions when prices are updated.\n\tuseEffect( () => {\n\t\tconvertCoinsAmounts( lastBaseCoin, amounts[ lastBaseCoin ] );\n\t}, [ prices ] );\n\n\t/**\n\t * Convert the amounts of the coins to the equivalent amount of the base\n\t * coin used.\n\t *\n\t * @param {string} baseCoin - The coin to use as a base.\n\t * @param {number} amountOverride - The new amount for the base coin.\n\t */\n\tconst convertCoinsAmounts = ( baseCoin: string, amountOverride: number ) => {\n\t\tsetLastBaseCoin( baseCoin );\n\t\tconst newAmounts = { ...amounts };\n\t\tnewAmounts[ baseCoin ] = amountOverride;\n\n\t\t// Convert the current amount to USD.\n\t\tconst usdAmount = 'usd' !== baseCoin ? amountOverride * prices[ baseCoin ] : amountOverride;\n\t\tif ( 'usd' !== baseCoin ) {\n\t\t\tnewAmounts.usd = usdAmount;\n\t\t}\n\n\t\t// Convert all the other coins.\n\t\tfor ( const [ targetCoin, targetPrice ] of Object.entries( prices ) ) {\n\t\t\tif ( baseCoin !== targetCoin ) {\n\t\t\t\tnewAmounts[ targetCoin ] = calculateConversion( usdAmount, targetPrice );\n\t\t\t}\n\t\t}\n\t\tsetAmounts( newAmounts );\n\t};\n\n\t/**\n\t * Handler of the coin amounts changes.\n\t *\n\t * @param e - The input changed.\n\t * @param coin - The coin being changed.\n\t */\n\tconst handleAmountChange = ( e: React.ChangeEvent<HTMLInputElement>, coin: string ) => {\n\t\tconst value = e.target.value;\n\t\t// Allow empty input to be treated as 0, otherwise parse as float.\n\t\tconst newAmount = value === '' ? 0 : parseFloat( value );\n\t\tconvertCoinsAmounts( coin, newAmount );\n\t};\n\n\t/**\n\t * Focus the input when clicking on the row cells.\n\t *\n\t * @param {React.MouseEvent<HTMLTableRowElement>} e - The click event.\n\t */\n\tconst handleRowClick = ( e: React.MouseEvent<HTMLTableRowElement> ) => {\n\t\tif ( ( e.target as HTMLElement ).tagName === 'INPUT' ) {\n\t\t\treturn;\n\t\t}\n\t\tconst input = e.currentTarget.querySelector( 'input' );\n\t\tif ( input ) {\n\t\t\tinput.focus();\n\t\t}\n\t};\n\n\treturn (\n\t\t<figure className=\"wp-block-table is-style-stripes\">\n\t\t\t<table>\n\t\t\t\t<thead>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th className=\"mcc-converter-th-coin\">{ __( 'Cryptocurrency', 'multi-crypto-convert' ) }</th>\n\t\t\t\t\t\t<th className=\"mcc-converter-th-price\">{ __( 'Price (USD)', 'multi-crypto-convert' ) }</th>\n\t\t\t\t\t\t<th className=\"mcc-converter-th-amount\">{ __( 'Converted Amount', 'multi-crypto-convert' ) }</th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr\n\t\t\t\t\t\tclassName={ `mcc-converter-row${ 'usd' === lastBaseCoin ? ' mcc-row-active' : '' }` }\n\t\t\t\t\t\tonClick={ handleRowClick }\n\t\t\t\t\t>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{ __( 'USD', 'multi-crypto-convert' ) }\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t{ formatPrice( 1 ) }\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"mcc-usd-amount\"\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclassName=\"mcc-amount-input\"\n\t\t\t\t\t\t\t\tvalue={ 'usd' === lastBaseCoin ? amounts.usd : amounts.usd.toFixed( 2 ) }\n\t\t\t\t\t\t\t\tonChange={ ( e ) => handleAmountChange( e, 'usd' ) }\n\t\t\t\t\t\t\t\tplaceholder=\"1.00\"\n\t\t\t\t\t\t\t\tstep=\"0.01\"\n\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{ isLoading ? (\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td colSpan={ 3 }>{ __( 'Loading prices...', 'multi-crypto-convert' ) }</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tcoins.map( ( coin ) => {\n\t\t\t\t\t\t\tconst price = prices[ coin ];\n\t\t\t\t\t\t\tconst isCurrentCoin = coin === lastBaseCoin;\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\tkey={ coin }\n\t\t\t\t\t\t\t\t\tdata-coin={ coin }\n\t\t\t\t\t\t\t\t\tclassName={ isCurrentCoin ? 'mcc-row-active' : '' }\n\t\t\t\t\t\t\t\t\tonClick={ handleRowClick }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{ coin.toUpperCase() }\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{ formatPrice( price ) }\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"mcc-amount-input\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={ isCurrentCoin ? amounts[ coin ] : formatConvertedAmount( amounts[ coin ] ) }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ ( e ) => handleAmountChange( e, coin ) }\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"-\"\n\t\t\t\t\t\t\t\t\t\t\tstep=\"0.00000001\"\n\t\t\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} )\n\t\t\t\t\t) }\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</figure>\n\t);\n}\n","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"React\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Frontend script for the Multi-Crypto Converter block. This file serves as the\n * entry point for rendering the React-based frontend component.\n *\n * It finds all instances of the converter block on the page and mounts the\n * `FrontendConverter` component into them, passing the selected coins as a prop.\n */\nimport { createRoot } from '@wordpress/element';\nimport FrontendConverter from './FrontendConverter';\n\n/**\n * Initialize all converter blocks on the page\n */\nfunction initializeBlocks() {\n\tconst blockWrappers = document.querySelectorAll<HTMLElement>( '.wp-block-multi-crypto-convert-converter' );\n\tblockWrappers.forEach( ( div ) => {\n\t\tconst coinsString = div.dataset.coins;\n\t\tif ( coinsString ) {\n\t\t\tconst coins = coinsString.split( ',' ).map( ( coin ) => coin.trim() ).filter( Boolean );\n\t\t\tif ( coins.length > 0 ) {\n\t\t\t\tconst root = createRoot( div );\n\t\t\t\troot.render( <FrontendConverter coins={ coins } /> );\n\t\t\t}\n\t\t}\n\t} );\n}\n\n// Initialize blocks on DOMContentLoaded.\nif ( document.readyState === 'loading' ) {\n\tdocument.addEventListener( 'DOMContentLoaded', initializeBlocks );\n} else {\n\tinitializeBlocks();\n}\n"],"names":["useEffect","useState","__","jsx","_jsx","jsxs","_jsxs","UPDATE_INTERVAL_MS","fetchPrices","coinsParam","response","fetch","ok","Error","status","data","json","success","pricesMap","forEach","item","symbol","parseFloat","price_usd","message","error","console","calculateConversion","usdAmount","price","formatConvertedAmount","amount","toFixed","formatPrice","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","FrontendConverter","coins","prices","setPrices","amounts","setAmounts","lastBaseCoin","setLastBaseCoin","isLoading","setIsLoading","join","updatePrices","fetchedPrices","intervalId","setInterval","clearInterval","convertCoinsAmounts","baseCoin","amountOverride","newAmounts","usd","targetCoin","targetPrice","Object","entries","handleAmountChange","e","coin","value","target","newAmount","handleRowClick","tagName","input","currentTarget","querySelector","focus","className","children","onClick","id","type","onChange","placeholder","step","min","colSpan","map","isCurrentCoin","toUpperCase","createRoot","initializeBlocks","blockWrappers","document","querySelectorAll","div","coinsString","dataset","split","trim","filter","Boolean","length","root","render","readyState","addEventListener"],"ignoreList":[],"sourceRoot":""}